# ğŸ“¦æ•°æ®é‡‡é›†

 - âš ï¸âš ï¸âš ï¸ **æ³¨æ„ï¼š ä¸‹ä½æœºä»£ç ä½¿ç”¨æ ‡ç­¾ä¸º`1.1.5`çš„`kuavo-ros-opensource`**[kuavo-ros-opensource Â· Gitee](https://gitee.com/leju-robot/kuavo-ros-opensource/tree/1.1.5/)  
 âš ï¸âš ï¸âš ï¸ **æ³¨æ„ï¼šé‡‡é›†å‰å…ˆå¯¹æœºå™¨äººåšå¤´éƒ¨å’Œæ‰‹éƒ¨æ ‡å®š(è°ƒè¯•æ•™ç¨‹/æœºå™¨äººå…³èŠ‚æ ‡å®š)ï¼Œå¯ä»¥é€šè¿‡è´´è´´çº¸æˆ–å…¶ä»–æ–¹å¼æ ‡è®°é›¶ç‚¹ä½ç½®ï¼ˆæ‰‹è‡‚æ­£å¸¸æ‘†ç›´ï¼Œå¤´éƒ¨éœ€è¦ä¿è¯åœ¨é‡‡é›†æ—¶æ‘„åƒå¤´èƒ½çœ‹åˆ°æŠ“å–ç‰©å’Œæ”¾ç½®ç‚¹ï¼‰ï¼Œä¿è¯æ¯æ¬¡é‡‡é›†æˆ–éƒ¨ç½²æ—¶æœºå™¨äººé›¶ç‚¹ä¸€è‡´ï¼Œå¤´éƒ¨å’Œæ‰‹è‡‚é›¶ç‚¹ä¼šå¯¹æ¨¡å‹éƒ¨ç½²æ•ˆæœäº§ç”Ÿå½±å“ã€‚
## ç« èŠ‚ä»‹ç»

æ•°æ®é‡‡é›†æ˜¯é‡‡é›†åŸºäº`ROS`å½•åˆ¶æŸä¸€æ—¶é—´æ®µæœºå™¨äººè¡Œä¸ºç”Ÿæˆçš„`RosBag`åŒ…ï¼Œå¯å°†å…¶è§†ä¸ºåŸå§‹æ•°æ®ã€‚ä½†æä¾›ç»™æ¨¡å‹è®­ç»ƒçš„æ•°æ®æ˜¯ç»è¿‡è½¬åŒ–çš„æ•°æ®ï¼Œå› æ­¤ï¼Œæœ¬æ•°æ®é‡‡é›†ç³»ç»Ÿé™¤æä¾›æœ€åŸºç¡€çš„**æ•°æ®é‡‡é›†**åŠŸèƒ½å¤–ï¼Œè¿˜æä¾›äº†**æ•°æ®å¤„ç†**åŠŸèƒ½ã€‚åŒæ—¶ï¼Œé‰´äºæœºå™¨äººæœ«ç«¯ä¸åŒã€èµ„æºå­˜å‚¨è·¯å¾„å­˜åœ¨å·®å¼‚ç­‰åŸå› ï¼Œæœ¬æ•°æ®é‡‡é›†ç³»ç»Ÿæä¾›äº†çµæ´»çš„**å‚æ•°é…ç½®**ã€‚

## ä¹èšæ•°é‡‡å¹³å°

[ä¹èšæ•°é‡‡ç®¡ç†å¹³å°](http://gym.lejurobot.com/platform/#/user/login)æ˜¯ä¸€æ¬¾ä¸“ä¸ºå…·èº«æ™ºèƒ½é¢†åŸŸæ‰“é€ SaaSæœåŠ¡å¹³å°ï¼Œå®ƒæä¾›äº†æ•°æ®é‡‡é›†ã€æ ‡æ³¨ã€å®¡æ ¸ã€å­˜å‚¨ã€ç®¡ç†ã€å¯è§†åŒ–ç­‰åŠŸèƒ½ï¼Œæ›´å¥½çš„å¸®åŠ©ç”¨æˆ·é«˜æ•ˆç®¡ç†ä¸åˆ†ææ•°æ®ã€‚

å¹³å°è¯¦ç»†ä½¿ç”¨è¯´æ˜è¯·æŸ¥çœ‹[ä¹èšæ•°é‡‡å¹³å° ç”¨æˆ·æ‰‹å†Œ](http://gym.lejurobot.com/manual/docs/%E6%80%BB%E8%A7%88/%E7%B3%BB%E7%BB%9F%E4%BB%8B%E7%BB%8D)

### ä¸€ã€ ç¯å¢ƒéƒ¨ç½²
#### 1. ç¡®è®¤ä¸Šä½æœºagxä¸»ç›®å½• `/home/leju_kuavo` ä¸‹æ˜¯å¦å­˜åœ¨ `kuavo_data_pilot` å·¥ä½œç©ºé—´  
kuavo_data_pilot ç›®å½•ç»“æ„å¦‚ä¸‹ï¼š  
```bash
kuavo_data_pilot/
â”œâ”€â”€ src/                      # æ ¸å¿ƒåŠŸèƒ½æ¨¡å—
â”‚   â”œâ”€â”€ kuavo_data_pilot_bin  # ç›¸æœºå¯åŠ¨è„šæœ¬ä¸Gradioå¹³å°
â”‚   â”œâ”€â”€ kuavo_msgs/           # æ¶ˆæ¯ä¾èµ–
â”‚   â”œâ”€â”€ manipulation_nodes/   # æ•°é‡‡å¹³å°ä¾èµ–
â”‚   â”œâ”€â”€ OrbbecSDK_ROS1/       # å¥¥æ¯”ä¸­å…‰ç›¸æœºåŠŸèƒ½åŒ…
â”‚   â””â”€â”€ realsense-ros/        # realsenseç›¸æœºåŠŸèƒ½åŒ…
â””â”€â”€ ...
```
éƒ¨ç½² `kuavo_data_pilot` å·¥ä½œç©ºé—´ 
```bash
cd ~/kuavo_data_pilot
catkin_make
source devel/setup.bash
``` 

#### 2.ç¡®è®¤æ˜¯å¦å­˜åœ¨ `robot_ws` è™šæ‹Ÿç¯å¢ƒ  
å¯ä»¥é€šè¿‡ç»ˆç«¯æ‰§è¡Œ `source robot_ws/bin/activate` çœ‹èƒ½å¦æ¿€æ´»è™šæ‹Ÿç¯å¢ƒã€‚  
è‹¥èƒ½æ­£å¸¸æ¿€æ´»åˆ™<**ç›´æ¥è·³è‡³æ“ä½œæµç¨‹**>ï¼Œè‹¥ä¸èƒ½:  
å®‰è£… Python 3.10 åŠç›¸å…³å·¥å…·  
```bash
sudo add-apt-repository ppa:deadsnakes/ppa
sudo apt-get update
sudo apt-get install python3.10 python3.10-venv python3.10-dev
```
ä½¿ç”¨ `venv` åˆ›å»ºè™šæ‹Ÿç¯å¢ƒï¼Œåç§°ä¸º `robot_ws`ï¼š  
```bash
cd ~
python3.10 -m venv robot_ws # åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ
```
åœ¨è™šæ‹Ÿç¯å¢ƒä¸‹é…ç½® pip æ¢æºï¼š
```bash
vi robot_ws/pip.conf
```
æ–‡ä»¶å†…å®¹å¦‚ä¸‹ï¼š
```bash
[global]
index-url = https://pypi.tuna.tsinghua.edu.cn/simple
```
æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ
```bash
source robot_ws/bin/activate
which python
# è¾“å‡ºå¦‚ä¸‹
/home/leju_kuavo/robot_ws/bin/python
which pip
# è¾“å‡ºå¦‚ä¸‹ï¼Œæ£€æŸ¥æ˜¯å¦ä¸€è‡´
/home/leju_kuavo/robot_ws/bin/pip
pip install --upgrade setuptools wheel
```
#### 3.å®‰è£…debåŒ…
ç¡®è®¤å·²è·å¾— `ros-noetic-kuavo-websocket-service-opensource_1.0.0-0focal_arm64.deb` å®‰è£…åŒ…  
åœ¨æœºå™¨äººä¸Šä½æœºç»ˆç«¯æ‰§è¡Œï¼š
```bash
sudo dpkg -i ros-noetic-kuavo-websocket-service-opensource_1.0.0-0focal_arm64.deb # å®‰è£…debåŒ…
cd /opt/ros/noetic/lib/kuavo_websocket_service_opensource/
./install_dependencies.sh # å®‰è£…åŒ…åéœ€å®‰è£…ä¾èµ–
```
å®‰è£…å®Œåå¯æµ‹è¯•å¹³å°å¯åŠ¨ï¼š
```bash
cd /opt/ros/noetic/lib/kuavo_websocket_service_opensource/
./run_server.sh
```
#### 4.é…ç½® systemd æœåŠ¡
æ³¨å†Œå¹¶å¯åŠ¨æœåŠ¡ï¼š
```bash
cd /opt/ros/noetic/share/kuavo_websocket_service_opensource/systemd_service/
sudo scp start_webserver.service /etc/systemd/system/
sudo systemctl enable start_webserver.service
sudo systemctl restart start_webserver.service
```
### äºŒã€ æ“ä½œæµç¨‹

**æœºå™¨äººä¸Šä½æœºAGXçš„ç”¨æˆ·åå’Œå¯†ç å‡ä¸ºleju_kuavo**
#### 1.æŒ‰ç…§[ä¹èšæ•°é‡‡å¹³å° ç”¨æˆ·æ‰‹å†Œ](http://gym.lejurobot.com/manual/docs/%E6%80%BB%E8%A7%88/%E7%B3%BB%E7%BB%9F%E4%BB%8B%E7%BB%8D)<åˆ›å»ºé‡‡é›†ä»»åŠ¡>ï¼Œå…¶ä¸­<æ·»åŠ è®¾å¤‡>æ—¶éœ€è¦ `MACåœ°å€` å’Œ `ä¸Šä½æœºIP` ã€‚  
æœºå™¨äººä¸Šä½æœºAGXè¿æ¥WIFIï¼ˆè¦èƒ½è®¿é—®äº’è”ç½‘ï¼‰ï¼Œå¹¶æŸ¥çœ‹AGXåœ¨è¯¥WIFIä¸‹çš„IPã€‚  
å¯ä»¥é€šè¿‡æŸ¥çœ‹WIFIå±æ€§æˆ–è€…ç»ˆç«¯è¾“å…¥ `ifconfig` æŸ¥çœ‹ `IPv4 Address`  
MACåœ°å€è·å–æ–¹æ³•ï¼šåœ¨è¿è¡Œæœºå™¨äººç¨‹åºåä¼šæœ‰æ‰“å°è¾“å‡º 
```bash
0000002154: EtherCAT network adapter MAC: 48-21-0B-59-A8-AF # 48-21-0B-59-A8-AF å³ä¸º MAC åœ°å€ã€‚
```
#### 2.å¯åŠ¨ç›¸æœºèŠ‚ç‚¹å’Œwebsocketè¿æ¥èŠ‚ç‚¹
ä¸Šä½æœºAGXç»ˆç«¯æ‰§è¡Œï¼š
```bash
cd ~/kuavo_data_pilot/src/kuavo_data_pilot_bin/scripts/
./start_camera.sh
```
å¦å¼€ç»ˆç«¯
```bash
source robot_ws/bin/activate # æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ
cd /opt/ros/noetic/lib/kuavo_websocket_service_opensource/
./run_server.sh
```
æ­¤æ—¶è¿›å…¥æ•°æ®é‡‡é›†ï¼Œå¯¹åº”æœºå™¨äººè®¾å¤‡çŠ¶æ€ä¼šç”± `ç¦»çº¿` è½¬ä¸º `ç©ºé—²` ï¼Œç‚¹å‡»`ç©ºé—²`ï¼Œç•Œé¢ä¼šæ˜¾ç¤ºæœºå™¨äººä¸‰ä¸ªæ‘„åƒå¤´çš„ç”»é¢ï¼ŒçŠ¶æ€ `ç©ºé—²` è½¬ä¸º `å¿™ç¢Œ` ã€‚
#### 3.å¯åŠ¨æœºå™¨äººVRé¥æ“
æŒ‰ç…§ [ä¹èšæ•°é‡‡å¹³å° ç”¨æˆ·æ‰‹å†Œ-è®­ç»ƒåœºç®¡ç†-æœºå™¨äººé¥æ“æ•™ç¨‹](http://gym.lejurobot.com/manual/docs/%E8%AE%AD%E7%BB%83%E5%9C%BA%E7%AE%A1%E7%90%86/%E6%9C%BA%E5%99%A8%E4%BA%BA%E6%91%87%E6%93%8D%E6%95%99%E7%A8%8B) å¯åŠ¨æœºå™¨äººVRé¥æ“ï¼Œç‚¹å‡»å¼€å§‹é‡‡é›†ï¼Œå³å¯ä½¿ç”¨VRé¥æ§æœºå™¨äººè¿›è¡Œæ•°æ®é‡‡é›†å·¥ä½œã€‚

åé¢çš„æ•°æ®æ ‡æ³¨ã€å®¡æ ¸ã€å¯¼å‡ºå·¥ä½œæŒ‰[ä¹èšæ•°é‡‡å¹³å° ç”¨æˆ·æ‰‹å†Œ](http://gym.lejurobot.com/manual/docs/%E6%80%BB%E8%A7%88/%E7%B3%BB%E7%BB%9F%E4%BB%8B%E7%BB%8D)
æ“ä½œå³å¯ã€‚